# 域名配置指南

## 概述

本系统支持 **15 个域名** 的统一管理，所有域名通过数据库动态配置，可以灵活绑定到不同的网站。

## 管理后台

- **域名**: admin.telegram1688.com
- **端口**: 3100
- **默认账号**: admin@example.com / admin123

## 前台网站域名列表

### 全部 15 个域名

1. telegram1688.com
2. telegram2688.com
3. telegramcnfw.com
4. telegramcny28.com
5. telegramfuwu.com
6. telegramfwfw.com
7. telegramgzzh.com
8. telegramhnzh.com
9. telegramjiaoyu.com
10. telegramrmb28.com
11. telegramxzb.com
12. telegramxzfw.com
13. telegramzhfw.com
14. xztelegram.com
15. zhxztelegram.com

## 推荐域名分配方案

### Website 1 (端口 3001) - 5个域名
绑定以下域名：
- telegram1688.com
- telegram2688.com
- telegramcny28.com
- telegramrmb28.com
- telegramxzb.com

### Website 2 (端口 3002) - 5个域名
绑定以下域名：
- telegramcnfw.com
- telegramfuwu.com
- telegramfwfw.com
- telegramxzfw.com
- telegramzhfw.com

### Website TG (端口 3003) - 5个域名
绑定以下域名：
- telegramgzzh.com
- telegramhnzh.com
- telegramjiaoyu.com
- xztelegram.com
- zhxztelegram.com

## 配置步骤

### 第一步：在管理后台添加域名别名

1. 登录管理后台: https://admin.telegram1688.com
2. 进入 **网站管理** → **域名别名**
3. 点击 **添加域名别名**
4. 为每个域名填写配置：

#### Website 1 域名配置示例

```
域名: telegram1688.com
网站: Website 1
网站名称: Telegram中文网
网站描述: Telegram中文官方服务平台，提供中文版下载、使用教程、最新资讯
主要标签: telegram, 中文, 下载, 教程
次要标签: telegram中文版, 官网, 安装
启用蜘蛛池: 是
```

重复以上步骤，添加所有 15 个域名。

### 第二步：配置 Nginx 反向代理

在宝塔面板中为每个域名配置 Nginx：

#### 管理后台 Nginx 配置

```nginx
# admin.telegram1688.com
upstream admin_backend {
    server 127.0.0.1:3100;
}

server {
    listen 80;
    listen 443 ssl http2;
    server_name admin.telegram1688.com;

    # SSL 证书配置（宝塔自动生成）
    ssl_certificate /www/server/panel/vhost/cert/admin.telegram1688.com/fullchain.pem;
    ssl_certificate_key /www/server/panel/vhost/cert/admin.telegram1688.com/privkey.pem;

    location / {
        proxy_pass http://admin_backend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

#### 前台网站 Nginx 配置

```nginx
# Website 1 的 5 个域名
upstream website1_backend {
    server 127.0.0.1:3001;
}

server {
    listen 80;
    listen 443 ssl http2;
    server_name telegram1688.com telegram2688.com telegramcny28.com telegramrmb28.com telegramxzb.com;

    # SSL 证书配置（需要为每个域名单独申请）
    ssl_certificate /www/server/panel/vhost/cert/telegram1688.com/fullchain.pem;
    ssl_certificate_key /www/server/panel/vhost/cert/telegram1688.com/privkey.pem;

    location / {
        proxy_pass http://website1_backend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}

# Website 2 的 5 个域名
upstream website2_backend {
    server 127.0.0.1:3002;
}

server {
    listen 80;
    listen 443 ssl http2;
    server_name telegramcnfw.com telegramfuwu.com telegramfwfw.com telegramxzfw.com telegramzhfw.com;

    # SSL 证书配置
    ssl_certificate /www/server/panel/vhost/cert/telegramcnfw.com/fullchain.pem;
    ssl_certificate_key /www/server/panel/vhost/cert/telegramcnfw.com/privkey.pem;

    location / {
        proxy_pass http://website2_backend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-for $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}

# Website TG 的 5 个域名
upstream website_tg_backend {
    server 127.0.0.1:3003;
}

server {
    listen 80;
    listen 443 ssl http2;
    server_name telegramgzzh.com telegramhnzh.com telegramjiaoyu.com xztelegram.com zhxztelegram.com;

    # SSL 证书配置
    ssl_certificate /www/server/panel/vhost/cert/telegramgzzh.com/fullchain.pem;
    ssl_certificate_key /www/server/panel/vhost/cert/telegramgzzh.com/privkey.pem;

    location / {
        proxy_pass http://website_tg_backend;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

### 第三步：申请 SSL 证书

在宝塔面板中为每个域名申请免费 SSL 证书：

1. 进入 **网站** → 找到对应域名
2. 点击 **SSL** → **Let's Encrypt**
3. 勾选所有域名（支持通配符）
4. 点击 **申请**

### 第四步：配置 DNS 解析

在域名注册商（如阿里云、腾讯云）添加 A 记录：

```
记录类型: A
主机记录: @
记录值: 您的服务器IP地址
TTL: 600
```

为每个域名添加解析：
- telegram1688.com → 服务器IP
- telegram2688.com → 服务器IP
- ... (其余13个域名)

### 第五步：测试配置

使用以下命令测试域名解析：

```bash
# 测试域名解析
ping telegram1688.com
ping telegram2688.com

# 测试 Nginx 配置
nginx -t

# 重启 Nginx
systemctl restart nginx

# 查看 PM2 服务状态
pm2 list
```

## 域名 SEO 配置建议

每个域名可以有独立的 SEO 配置：

### 主要标签（Primary Tags）
针对 Telegram 相关关键词：
- telegram
- telegram中文
- telegram下载
- telegram官网
- telegram教程

### 次要标签（Secondary Tags）
长尾关键词：
- telegram中文版下载
- telegram安装教程
- telegram使用指南
- telegram最新版本
- telegram电脑版

### 蜘蛛池策略
- **启用蜘蛛池**: 所有域名建议开启
- **更新频率**: 每日/每周/每月
- **内容来源**: 自动从文章库抓取

## 常见问题

### Q1: 域名无法访问？

**检查清单**:
1. DNS 解析是否生效（24小时内）
2. Nginx 配置是否正确
3. PM2 服务是否运行
4. 防火墙是否开放端口 80/443
5. 数据库中域名别名是否已添加

### Q2: SSL 证书申请失败？

**解决方案**:
1. 确保域名已解析到服务器
2. 检查 80 端口是否开放
3. 暂时关闭防火墙重试
4. 使用宝塔面板的 SSL 申请功能

### Q3: 多个域名显示相同内容？

这是正常的！系统设计为：
- 同一个网站的多个域名共享内容
- 通过不同的 SEO 配置吸引不同关键词流量
- 在管理后台统一管理所有域名的 SEO 策略

### Q4: 如何添加新域名？

1. 在管理后台添加域名别名
2. 配置 Nginx 反向代理
3. 申请 SSL 证书
4. 添加 DNS 解析
5. 测试访问

## 监控和维护

### 日常监控

在管理后台查看：
- **蜘蛛池监控**: 各域名的爬虫访问情况
- **关键词排名**: 各域名的排名表现
- **流量统计**: Google Analytics 数据

### 定期维护

- **每周**: 检查 SSL 证书有效期
- **每月**: 更新内容，优化 SEO 配置
- **每季度**: 分析流量，调整域名策略

## 数据库配置

所有域名配置存储在 `DomainAlias` 表中：

```sql
-- 查看所有域名配置
SELECT * FROM "DomainAlias";

-- 查看某个网站的所有域名
SELECT * FROM "DomainAlias" WHERE "websiteId" = 1;

-- 统计域名数量
SELECT "websiteId", COUNT(*) as domain_count
FROM "DomainAlias"
GROUP BY "websiteId";
```

## 环境变量

配置文件位置: `.env.local`

关键配置项：
```env
DATABASE_URL="postgresql://seo_user:SeoTg2024!Secure@localhost:5432/seo_websites"
NEXTAUTH_URL="https://admin.telegram1688.com"
NEXT_PUBLIC_WEBSITE1_URL="https://telegram1688.com"
NEXT_PUBLIC_WEBSITE2_URL="https://telegram2688.com"
NEXT_PUBLIC_WEBSITE_TG_URL="https://telegramcnfw.com"
```

## 部署检查清单

- [ ] 数据库已创建并初始化
- [ ] .env.local 配置完成
- [ ] PM2 服务运行正常
- [ ] 所有域名 DNS 已解析
- [ ] Nginx 配置已添加
- [ ] SSL 证书已申请
- [ ] 管理后台可访问
- [ ] 15个域名别名已添加
- [ ] 蜘蛛池配置已启用
- [ ] 测试各域名访问正常

## 技术支持

如遇问题，请查看：
- 服务器部署指南.md
- 使用说明书.md
- PM2 日志: `pm2 logs`
- Nginx 日志: `/www/wwwlogs/`

---

**配置完成后，您将拥有：**
- 1 个管理后台域名
- 15 个前台网站域名
- 统一的内容管理系统
- 独立的 SEO 配置策略
- 完整的蜘蛛池监控系统
